{% extends "base.html" %}
{% block content %}
<div class="category-header">
    <h1>{{ category|capitalize }} resources</h1>
</div>

<form class="filters-row" method="get">
    <select name="neighborhood" class="filter-select">
        <option value="">All Neighborhoods</option>
        {% for n in neighborhoods %}
        <option value="{{ n }}" {% if n == selected_neighborhood %}selected{% endif %}>
            {{ n }}
        </option>
        {% endfor %}
    </select>
    
    <input 
        type="text" 
        name="q" 
        value="{{ query }}" 
        placeholder="Search..." 
        class="filter-input"
    />
    
    <button type="submit" class="btn-primary" style="flex: 0 0 auto; padding: 0.75rem 1.5rem;">Search</button>
</form>

{% if resources %}
<div class="resource-list">
    {% for r in resources %}
    <article class="resource-card">
        <div class="star-rating">
            <span class="star-icon">⭐</span>
            <span class="star-icon">⭐</span>
            <span class="star-icon">⭐</span>
        </div>
        <h3>{{ r.name }}</h3>
        <p class="resource-meta">
            <strong>Neighborhood:</strong> {{ r.neighborhood }}<br>
            <strong>Category:</strong> {{ r.category|capitalize }}
        </p>
        <p class="resource-info">{{ r.description }}</p>
        <p class="resource-info">
            <strong>Address:</strong> {{ r.address }}<br>
            {% if r.phone %}
            <strong>Phone:</strong> <a href="tel:{{ r.phone }}">{{ r.phone }}</a>
            {% endif %}
        </p>
    </article>
    {% endfor %}
</div>
{% else %}
<div class="card">
    <p>No resources found for this filter yet.</p>
</div>
{% endif %}

<div class="emergency-section">
    <h3>Need emergency help right now?</h3>
    <a href="tel:211" class="btn-211">Call 211</a>
</div>
{% endblock %}
